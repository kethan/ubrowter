var ubrow=function(t){"use strict";function e(t,e){var r,o,s,n="";for(r in t)if(void 0!==(s=t[r]))if(Array.isArray(s))for(o=0;o<s.length;o++)n&&(n+="&"),n+=encodeURIComponent(r)+"="+encodeURIComponent(s[o]);else n&&(n+="&"),n+=encodeURIComponent(r)+"="+encodeURIComponent(s);return(e||"")+n}function r(t){if(!t)return"";var e=decodeURIComponent(t);return"false"!==e&&("true"===e||(0*+e==0?+e:e))}function o(t){for(var e,o,s={},n=t.split("&");e=n.shift();)void 0!==s[o=(e=e.split("=")).shift()]?s[o]=[].concat(s[o],r(e.shift())):s[o]=r(e.shift());return s}function s(t,e){const r=[],o=new RegExp("^"+t.replace(/\((.*?)\)/g,"(?:$1)?").replace(/(\(\?)?:\w+/g,((t,e)=>(r.push(t.slice(1)),e?t:"([^/?]+)"))).replace(/\*/g,(()=>(r.push("path"),"([^?]*?)")))+"(?:\\?([\\s\\S]*))?$").exec(e),s={};if(o)for(let n=0;n<r.length;n++)s[r[n]]=o[n+1];return{match:!!o,params:s,pattern:t,url:e}}return t.Browter=class extends class{constructor(){this.routes=[],this.handlers=[]}use(...t){return this.handlers=[...this.handlers,...t],this}get(t,...e){return this.routes.push({path:t,method:"GET",handlers:e}),this}handler({req:t,res:e,onError:r,onNoMatch:n}){let i=!1;for(const{path:h,handlers:a}of this.routes.filter((e=>e.method.toLowerCase()==t.method.toLowerCase()))){let n=s(h,t.url);if(n.match){i=!0;let s=[...this.handlers,...a];t.params=n.params,t.path=n.url,t.routePath=h,t.query=o(n.url.split("?")[1]||"");let l=(t,e)=>{try{let o=s.shift();o?o(t,e,(o=>o?r(o,t,e):l(t,e))):r(null,t,e)}catch(o){r(o,t,e)}};l(t,e)}}i||n(t,e)}}{constructor(){super(),this.listener={onError:()=>{},onNoMatch:()=>{}},this.click=t=>{var e=t.target.closest("a"),r=e&&e.getAttribute("href");t.ctrlKey||t.metaKey||t.altKey||t.shiftKey||t.button||t.defaultPrevented||r&&!e.target&&e.host===location.host&&"#"!=r[0]&&(t.preventDefault(),r!=location.pathname+location.search&&this.redirect(r))}}redirect(t,r={},o=!1){let s={url:t,method:"GET",body:null};(t+=0!==Object.keys(r).length?e(r,"?"):"")==location.pathname+location.search||o?history.replaceState(t,"",t):history.pushState(t,"",t);this.handler({req:s,res:{redirect:this.redirect.bind(this),send:(t=>s.body=t).bind(this)},onError:(t,e,r)=>{this.listener.onError(t,e,r)},onNoMatch:(t,e)=>{this.listener.onNoMatch(t,e)}})}route(){this.redirect(location.pathname+location.search)}unlisten(){removeEventListener("popstate",this.route.bind(this)),removeEventListener("click",this.click)}listen(t=this.listener){this.listener=t,addEventListener("popstate",this.route.bind(this)),addEventListener("click",this.click),this.route()}},t.decode=o,t.encode=e,t.pathToRegex=s,Object.defineProperty(t,"__esModule",{value:!0}),t[Symbol.toStringTag]="Module",t}({});
